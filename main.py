import discord
from discord.ext import commands
from dislash import Option, OptionType
import random

# Укажите намерения, которые ваш бот будет использовать
intents = discord.Intents.all()

intents.members = True  # Добавляем намерение для доступа к информации о членах сервера

# Словарь предметов и их цен
items_prices = {
    "Меч": 50,
    "Лук": 40,
    "Стрелы": 5,
    "Зелье лечения": 30,
    "Щит": 20,
    "Кольчуга": 25,
    "Шлем": 15,
    "Посох": 12,
    "Книга заклинаний": 80,
    "Амулет": 60,
    "Кольцо": 70,
    "Лук лучника": 35,
    "Секира": 45,
    "Кинжал": 10,
    "Факел": 1,
    "Палка": 2,
    "Лошадь": 90,
    "Конь": 100,
    "Карета": 80,
    "Подкова": 8,
    "Пиала": 4,
    "Плащ": 18,
    "Ключ": 6,
    "Сундук": 75,
    "Медальон": 55,
    "Лента": 3,
    "Трость": 7,
    "Сумка": 22,
    "Кольцо могущества": 95,
    "Посох мага": 85,
    "Фляга": 9,
    "Перчатки": 14,
    "Пояс": 13,
    "Сапоги": 17,
    "Рубашка": 11,
    "Штаны": 16,
    "Шляпа": 19,
    "Перчатки вора": 75,
    "Плащ теней": 65,
    "Колчан стрел": 23,
    "Карта": 21,
    "Компас": 24,
    "Фонарь": 26,
    "Скрижаль": 27,
    "Кубок": 28,
    "Сфера": 29,
    "Секстант": 30,
    "Подарок": 31,
    "Мешок": 32,
    "Музыкальный инструмент": 33,
    "Картина": 34,
    "Роза": 35,
    "Гребень": 36,
    "Книга": 37,
    "Подушка": 38,
    "Маска": 39,
    "Жезл": 40,
    "Трость-пистолет": 41,
    "Спички": 42,
    "Наручники": 43,
    "Флакон": 44,
    "Меч": 10,
    "Лук": 8,
    "Стрелы": 1,
    "Зелье лечения": 10,
    "Щит": 12,
    "Кольчуга": 15,
    "Шлем": 15,
    "Посох": 6,
    "Книга заклинаний": 20,
    "Амулет": 10,
    "Кольцо": 12,
    "Лук лучника": 8,
    "Секира": 10,
    "Кинжал": 5,
    "Факел": 1,
    "Палка": 2,
    "Лошадь": 30,
    "Конь": 30,
    "Карета": 30,
    "Подкова": 3,
    "Пиала": 2,
    "Плащ": 8,
    "Ключ": 4,
    "Сундук": 25,
    "Медальон": 12,
    "Лента": 2,
    "Трость": 4,
    "Сумка": 10,
    "Кольцо могущества": 20,
    "Посох мага": 25,
    "Фляга": 4,
    "Перчатки": 6,
    "Пояс": 5,
    "Сапоги": 7,
    "Рубашка": 6,
    "Штаны": 7,
    "Шляпа": 10,
    "Перчатки вора": 25,
    "Плащ теней": 20,
    "Колчан стрел": 3,
    "Карта": 5,
    "Компас": 5,
    "Фонарь": 6,
    "Скрижаль": 12,
    "Кубок": 15,
    "Сфера": 16,
    "Секстант": 17,
    "Подарок": 5,
    "Мешок": 2,
    "Музыкальный инструмент": 14,
    "Картина": 13,
    "Роза": 9,
    "Гребень": 11,
    "Книга": 20,
    "Подушка": 10,
    "Маска": 10,
    "Жезл": 22,
    "Трость-пистолет": 19,
    "Спички": 2,
    "Наручники": 16,
    "Флакон": 8,
    "Зеркало": 14,
    "Мозаика": 25,
    "Свеча": 10,
    "Часы": 21,
    "Ключница": 18,
    "Лупа": 23,
    "Гобелен": 27,
    "Драгоценный камень": 50,
    "Рулетка": 30,
    "Фоторамка": 31,
    "Картонка": 32,
    "Скатерть": 25,
    "Медаль": 42,
    "Кулон": 47,
    "Амулет": 44,
    "Колье": 49,
    "Ожерелье": 48,
    "Кольцо": 46,
    "Браслет": 43,
    "Брошь": 20,
    "Пирсинг": 10,
    "Обруч": 5,
    "Ожерелье": 20,
    "Часы": 17,
    "Браслет": 16,
    "Серьги": 15,
    "Запонки": 10,
    "Зажим": 3,
    "Кольцо": 12,
    "Блестки": 11,
    "Маска": 3,
    "Бантик": 2,
    "Шляпа": 2,
    "Платок": 1,
    "Пояс": 2,
    "Ботинки": 5,
    "Сапоги": 4,
    "Купальник": 5,
    "Плавки": 2,
    "Шорты": 5,
    "Брюки": 10,
    "Юбка": 9,
    "Кофта": 18,
    "Футболка": 17,
    "Рубашка": 16,
    "Майка": 15,
    "Пиджак": 14,
    "Куртка": 13,
    "Пальто": 12,
    "Жилет": 11,
    "Мантия": 10,
    "Плащ": 9,
    "Шарф": 8,
    "Бандана": 7,
    "Повязка": 6,
    "Шляпа": 5,
    "Парик": 4,
    "Кепка": 3,
    "Кепи": 2,
    "Берет": 1,
    "Корона": 25,
    "Диадема": 25,
    "Свиток заклинания Огненный Шар": 20,
    "Свиток заклинания Лечение": 15,
    "Свиток заклинания Магическая Рука": 25,
    "Свиток заклинания Защита от Сил Зла": 30,
    "Свиток заклинания Ярость Великана": 35,
    "Свиток заклинания Призвать духа": 40,
    "Свиток заклинания Изгнание": 30,
    "Свиток заклинания Ледяное прикосновение": 25,
    "Свиток заклинания Слепящий свет": 20,
    "Свиток заклинания Призыв страха": 35,
    "Меч огненного вихря": 40,
    "Кинжал холодного прикосновения": 35,
    "Лук бури": 30,
    "Посох вихря": 45,
    "Книга заклинаний Пылающий Удар": 50,
    "Кольцо Стихии Земли": 40,
    "Кольцо Стихии Воды": 40,
    "Кольцо Стихии Воздуха": 40,
    "Кольцо Стихии Огня": 40,
    "Меч Стихии Земли": 45,
    "Меч Стихии Воды": 45,
    "Меч Стихии Воздуха": 45,
    "Меч Стихии Огня": 45,
    "Посох Стихии Земли": 50,
    "Посох Стихии Воды": 50,
    "Посох Стихии Воздуха": 50,
    "Посох Стихии Огня": 50,
    "Длинный меч эльфов": 35,
    "Кинжал гномов": 30,
    "Древний лук друидов": 40,
    "Посох хранителя мудрости": 45,
    "Книга заклинаний злого мага": 50,
    "Сломанный меч демона": 50,
    "Меч кровавого орка": 45,
    "Посох тьмы": 50,
    "Кольцо Потустороннего": 45,
    "Кольцо звездного света": 40,
    "Арбалет воров": 35,
    "Меч лучшего воина": 40,
    "Длинный лук странника": 30,
    "Посох мудреца": 45,
    "Книга заклинаний друидов": 50,
    "Свиток заклинания Огненный Шар": 20,
    "Свиток заклинания Лечение": 15,
    "Свиток заклинания Магическая Рука": 25,
    "Свиток заклинания Защита от Сил Зла": 30,
    "Свиток заклинания Ярость Великана": 35,
    "Меч огненного вихря": 40,
    "Кинжал холодного прикосновения": 35,
    "Лук бури": 30,
    "Посох вихря": 45,
    "Книга заклинаний Пылающий Удар": 30,
    "Кольцо Стихии Земли": 40,
    "Кольцо Стихии Воды": 40,
    "Кольцо Стихии Воздуха": 40,
    "Кольцо Стихии Огня": 40,
    "Меч Стихии Земли": 45,
    "Меч Стихии Воды": 45,
    "Меч Стихии Воздуха": 45,
    "Меч Стихии Огня": 45,
    "Посох Стихии Земли": 50,
    "Посох Стихии Воды": 50,
    "Посох Стихии Воздуха": 50,
    "Посох Стихии Огня": 50
}

# Префикс для команд бота
bot = commands.Bot(command_prefix='!', intents=intents, help_command=commands.DefaultHelpCommand())

# Функция для генерации предметов у торговца
async def generate_items():
    num_items = random.randint(3, 10)  # Генерируем случайное количество предметов от 1 до 5
    items = random.sample(list(items_prices.keys()), num_items)  # Выбираем случайные предметы из списка доступных
    return items

# Функция для получения цены предмета
async def get_item_price(item):
    return items_prices.get(item, "Цена неизвестна")

# Команда для генерации предметов у торговца
@bot.command(shop="Показывает список предметов, доступных для покупки у торговца.")
async def shop(ctx):
    items = await generate_items()
    if items:
        await ctx.send("Торговец предлагает следующие предметы на продажу:")
        for item in items:
            price = await get_item_price(item)
            await ctx.send(f"{item}: {price}")
    else:
        await ctx.send("У торговца сегодня нет товаров.")

@bot.command(roll="Бросок кубика")
async def roll(ctx, dice: str):
    try:
        rolls, limit = map(int, dice.split('d'))
    except Exception:
        await ctx.send('Неправильный формат! Используйте XdY, где X - количество бросков, Y - количество граней')
        return

    result = ', '.join(str(random.randint(1, limit)) for r in range(rolls))
    await ctx.send(result)

# Запуск бота
bot.run('')
